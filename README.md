# Планировщик задач (TODO-сервер)

## Описание проекта

Данный проект представляет собой веб-сервер, реализующий функциональность планировщика задач (аналог TODO-листа). Сервер позволяет добавлять, редактировать, удалять и выполнять задачи с возможностью повторения по заданным правилам. Задачи хранятся в базе данных SQLite и доступны через REST API. Проект разработан для закрепления навыков работы с HTTP-серверами, REST API, базами данных и обработкой повторяющихся событий.

## Список выполненных заданий со звёздочкой

- Реализована возможность слушать порт через переменную окружения `TODO_PORT`
- Реализована возможность определять путь к файлу базы данных через `TODO_DBFILE`
- Реализован алгоритм вычисления следующих дат по правилам повторения (включая дни недели и месяца)
- Реализована возможность поиска задач по подстроке и дате

## Инструкция по запуску кода локально

1. Установите Go (рекомендуемая версия 1.20+)
2. Клонируйте репозиторий и перейдите в корневую директорию проекта

TODO_PORT=7540 TODO_DBFILE=./scheduler.db

4. Установите зависимости:

```bash
go mod tidy


- Запустите сервер:
go run main.go


- Откройте в браузере:
http://localhost:7540/


Фронтенд будет загружен из директории ./web. Сервер также отдаёт статические файлы: .js, .css, favicon.ico.
Инструкция по запуску тестов
- Убедитесь, что сервер запущен
- В файле tests/settings.go можно указать параметры:
const (
    Port    = "7540"
    DBFile  = "./scheduler.db"
    Token   = "" // если используется аутентификация
)


- Запустите тесты:
go test ./tests


Инструкция по сборке и запуску через Docker
Docker не реализован. Dockerfile отсутствует.
Структура проекта
.
├── pkg/
│   ├── api/
│   │   ├── addtask.go
│   │   ├── api.go
│   │   ├── date.go
│   │   ├── deletetask.go
│   │   ├── gettask.go
│   │   ├── json.go
│   │   ├── nextdateHandler.go
│   │   ├── taskdone.go
│   │   ├── tasks.go
│   │   └── updatetask.go
│   ├── db/
│   │   ├── db.go
│   │   └── task.go
│   ├── nextdate/
│   │   └── nextdate.go
│   └── server/
│       └── server.go
├── tests/
├── web/
├── go.mod
├── go.sum
├── main.go
├── README.md
└── scheduler.db



API-эндпоинты
- GET /api/nextdate?now=YYYYMMDD&date=YYYYMMDD&repeat=... — вычисление следующей даты
- POST /api/task — добавление задачи
- GET /api/tasks — получение списка ближайших задач (поддерживает ?search=)
- GET /api/task?id=... — получение задачи по ID
- PUT /api/task — редактирование задачи
- DELETE /api/task?id=... — удаление задачи
- POST /api/task/done?id=... — отметить задачу выполненной
Переменные окружения
- TODO_PORT — порт, на котором запускается сервер (по умолчанию 7540)
- TODO_DBFILE — путь к файлу базы данных (по умолчанию ./scheduler.db)
- TODO_PASSWORD — (не реализовано) пароль для аутентификации

Проект создан в учебных целях.
